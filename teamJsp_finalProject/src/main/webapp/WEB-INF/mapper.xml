<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  

  <mapper namespace="kr.co.finalp">
  	<select id="gallery_selectAll" resultType="gdto" parameterType="se">
  		SELECT galleryno, gallery_category_no, admin_no, gallery_title, gallery_date, gallery_hit
  		FROM (SELECT ROWNUM rn, galleryno, gallery_category_no, admin_no, gallery_title, gallery_date, gallery_hit
  			FROM (SELECT galleryno, gallery_category_no, admin_no, gallery_title, gallery_date, gallery_hit
  					FROM gallery
  					ORDER BY galleryno desc)
  				WHERE ROWNUM &lt;=#{endNo})
  			WHERE RN &gt;=#{startNo}  		
  	</select>
  	
  	<select id="gallery_getTotal" resultType="int">
  		SELECT count(*) total
  		FROM gallery
  	</select>
  	
  	<!-- 공지사항 게시물 하나 선택  -->
  	<select id="notice_selectOne" parameterType="int" resultType="ndto">
 		SELECT noticeno, notice_title, notice_contents, to_char(notice_date, 'YYYY/MM/DD HH24:MI') notice_date, notice_hit 
 		FROM notice
 		WHERE noticeno =#{noticeno}
 	</select>
 	
 	
 	<!-- 공지사항 전체선택  -->
 	<select id="notice_selectAll" parameterType="se" resultType="ndto">
 		SELECT noticeno, notice_title, notice_contents, notice_date, notice_hit
 		FROM ( SELECT ROWNUM rn, noticeno, notice_title, notice_contents, notice_date, notice_hit  
 			FROM( SELECT noticeno, notice_title, notice_contents, to_char(notice_date, 'YYYY/MM/DD') notice_date, notice_hit
 					FROM notice
 					ORDER BY noticeno desc )
 			WHERE ROWNUM &lt;=#{endNo} )
 		WHERE RN &gt;=#{startNo}
 	</select>
 	
 	<!-- 공지사항 총 게시물 수  -->
 	<select id="notice_getTotal" resultType="int">
 		SELECT COUNT(*) total
 		FROM notice
 	</select>
 	
 	<!-- 공지사항 게시물 작성  -->
 	<insert id="notcie_addOne" parameterType="ndto">
	 	INSERT INTO notice
	 	VALUES (notice_noticeno_seq.nextval, 1 , #{notice_title} , #{notice_contents}, #{notice_date}, #{notice_hit} )
 	</insert>
 	
 	<!-- 공지사항 게시물 수정  -->
 	<update id="notice_updateOne" parameterType="ndto">
 		UPDATE notice
 		SET notice_title = #{notice_title}, notice_contents = #{notice_contents}
 		WHERE notceno = #{noticeno}
 	</update>
 	
 	<!-- 공지사항 게시물 삭제  -->
 	<delete id="notice_deleteOne" parameterType="int">
 		DELETE FROM notice
 		WHERE noticeno = #{noticeno}
 	</delete>
 	
 	<!-- 공지사항 게시판 조회수  -->
 	<update id="notice_raiseHits" parameterType="int">
 		UPDATE notice
 		SET hits = hits+1
 		WHERE 
 	</update>
 		
 	
</mapper>
